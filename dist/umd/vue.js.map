{"version":3,"file":"vue.js","sources":["../../src/utils/index.js","../../src/observer/array.js","../../src/observer/index.js","../../src/state.js","../../src/compiler/parse-html.js","../../src/compiler/index.js","../../src/init.js","../../src/index.js"],"sourcesContent":["export function isObject(obj) {\n  return typeof obj === 'object' && obj !== null\n}\n\nexport function def(data, key, value) {\n  Object.defineProperty(data, key, {\n    enumerable: false, // 不可遍历\n    configurable: false,\n    value: value,\n  })\n}\n// 取值时实现代理效果\nexport function proxy(target, sourceKey, key) {\n  Object.defineProperty(target, key, {\n    get() {\n      return target[sourceKey][key]\n    },\n    set(newValue) {\n      target[sourceKey][key] = newValue\n    },\n  })\n}\n","// 重写数组的方法 push、pop、shift、unshift、sort、splice、reverse(这些方法回改变原数组所以需要重写)，slice这个方法不会改变原数组所以不需要重写\nlet oldArrayMethods = Array.prototype\nexport const arrayMethods = Object.create(oldArrayMethods)\n\nconst methods = ['push', 'pop', 'shift', 'unshift', 'sort', 'splice', 'reverse']\nmethods.forEach(function (method) {\n  arrayMethods[method] = function (...args) {\n    console.log('用户操作了', method)\n    const result = oldArrayMethods[method].apply(this, args) // 这里得把args传过去才行\n    // push unshift方法插入的值可能是对象需要观测\n    let insert\n    let ob = this.__ob__\n    switch (method) {\n      case 'push':\n      case 'unshift':\n        insert = args\n        break\n      case 'splice':\n        insert = args.slice(2)\n      default:\n        break\n    }\n    if (insert) {\n      ob.observerArray(insert)\n    }\n    return result\n  }\n})\n","// Object.defineProperty 不能兼容IE8以下\nimport { isObject, def } from '../utils/index'\nimport { arrayMethods } from './array.js'\nclass Observer {\n  constructor(value) {\n    value.__ob__ = this\n    def(value, '__ob__', this)\n    if (Array.isArray(value)) {\n      // 数组不会对索引进行监控，性能差，前端开发中通过索引去操作也很少，一般用的push、 pop等方法\n      // 重写数组方法\n      value.__proto__ = arrayMethods\n      // 对数组的对象去监控\n      this.observerArray(value)\n    } else {\n      this.walk(value)\n    }\n  }\n  walk(data) {\n    Object.keys(data).forEach((key) => {\n      defineReactive(data, key, data[key])\n    })\n  }\n  observerArray(data) {\n    data.forEach((item) => {\n      observer(item)\n    })\n  }\n}\nfunction defineReactive(data, key, value) {\n  observer(value) // 递归实现深度检测\n  Object.defineProperty(data, key, {\n    get() {\n      return value\n    },\n    set(newValue) {\n      observer(newValue) // 新值也是对象的时候需要再次监测\n      if (value !== newValue) {\n        value = newValue\n      }\n    },\n  })\n}\nexport function observer(data) {\n  if (!isObject(data)) {\n    return\n  }\n  return new Observer(data)\n}\n","import { observer } from './observer/index'\nimport { proxy } from './utils/index'\nexport function initState(vm) {\n  // vue 的props、methods、data、computed、watch、等的初始化\n  const opts = vm.$options\n  if (opts.props) {\n    initProps(vm)\n  }\n  if (opts.methods) {\n    initMethod(vm)\n  }\n  if (opts.data) {\n    initData(vm)\n  }\n  if (opts.computed) {\n    initComputed(vm)\n  }\n  if (opts.watch) {\n    initWatch(vm)\n  }\n}\n\nfunction initProps(vm) {}\nfunction initMethod(vm) {}\nfunction initData(vm) {\n  console.log('初始化数据', vm)\n  let data = vm.$options.data\n  data = vm._data = typeof data === 'function' ? data.call(vm) : data\n  // 代理 将vm.xxx 代理到vm._data.xxx(方便用户取值)\n  for (let key in data) {\n    proxy(vm, '_data', key)\n  }\n  // 对象劫持\n  // Object.defineProperty,给书香增加get、set 方法\n  observer(data) // 响应式原理\n}\nfunction initComputed(vm) {}\nfunction initWatch(vm) {}\n","export const unicodeRegExp =\n  /a-zA-Z\\u00B7\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u203F-\\u2040\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD/\n\n// Regular Expressions for parsing tags and attributes\nconst attribute =\n  /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/\nconst dynamicArgAttribute =\n  /^\\s*((?:v-[\\w-]+:|@|:|#)\\[[^=]+?\\][^\\s\"'<>\\/=]*)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z${unicodeRegExp.source}]*`\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`\nconst startTagOpen = new RegExp(`^<${qnameCapture}`) // 标签开头的正则，捕获的内容是标签名\nconst startTagClose = /^\\s*(\\/?)>/ // 捕获的内容是结尾标签\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`)\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g // 匹配{{}}\nconst regexEscapeRE = /[-.*+?^${}()|[\\]\\/\\\\]/g\nconst doctype = /^<!DOCTYPE [^>]+>/i\n// #7298: escape - to avoid being passed as HTML comment when inlined in page\nconst comment = /^<!\\--/\nconst conditionalComment = /^<!\\[/\n\nlet root = null //ast语法树树根\nlet currentParent = null // 当前父节点\nlet stack = [] // 栈存放dom 标签结构，判断标签是否正确闭合\nconst ELEMENT_TYPE = 1\nconst TEXT_TYPE = 3\n\nfunction createASTElement(tagName, attrs) {\n  return {\n    type: ELEMENT_TYPE,\n    tag: tagName,\n    attrs: attrs,\n    children: [],\n    parent: null,\n  }\n}\nfunction start(tagName, attrs) {\n  console.log('开始标签：', tagName, '属性是：', attrs)\n  let element = createASTElement(tagName, attrs)\n  if (!root) {\n    root = element\n  }\n  currentParent = element\n  stack.push(element) // 标签入栈\n}\nfunction chars(text) {\n  console.log('文本是：', text)\n  text = text.replace(/\\s/g, '')\n  if (text) {\n    currentParent.children.push({\n      text,\n      type: TEXT_TYPE,\n    })\n  }\n}\nfunction end(tagName) {\n  console.log('结束标签：', tagName)\n  let element = stack.pop()\n  currentParent = stack.length > 0 ? stack[stack.length - 1] : null\n  if (currentParent) {\n    element.parent = currentParent\n    currentParent.children.push(element) //实现了树的父子关系\n  }\n}\nexport function parseHtml(html) {\n  while (html) {\n    let textEnd = html.indexOf('<')\n    if (textEnd === 0) {\n      let startTagMatch = parseStartTag()\n      if (startTagMatch) {\n        start(startTagMatch.tagName, startTagMatch.attrs)\n        continue\n      }\n\n      let endTagMatch = html.match(endTag)\n      console.log('endTagMatch', endTagMatch)\n      if (endTagMatch) {\n        advance(endTagMatch[0].length)\n        end(endTagMatch[1])\n        continue\n      }\n    }\n    let text\n    if (textEnd > 0) {\n      text = html.substring(0, textEnd)\n    }\n    if (text) {\n      advance(text.length)\n      chars(text)\n    }\n  }\n  function advance(n) {\n    html = html.substring(n)\n  }\n  function parseStartTag() {\n    let start = html.match(startTagOpen)\n    if (start) {\n      const match = {\n        tagName: start[1],\n        attrs: [],\n      }\n      advance(start[0].length)\n      let end, attr\n      while (\n        !(end = html.match(startTagClose)) &&\n        (attr = html.match(attribute))\n      ) {\n        advance(attr[0].length) // 去掉属性\n        match.attrs.push({\n          name: attr[1],\n          value: attr[3] || attr[4] || attr[5],\n        })\n      }\n      if (end) {\n        // 去掉开始标签的 >\n        advance(end[0].length)\n        return match\n      }\n    }\n  }\n  return root\n}\n","import { parseHtml } from './parse-html'\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g // 匹配{{}}\n\nexport function compileToRender(template) {\n  function genProps(attrs) {\n    // 处理属性 拼接成属性字符串\n    let str = ''\n    for (let i = 0; i < attrs.length; i++) {\n      let attr = attrs[i]\n      if (attr.name === 'style') {\n        let obj = {}\n        attr.value.split(';').forEach((item) => {\n          let [key, value] = item.split(':')\n          obj[key] = value.trim()\n        })\n        attr.value = obj\n      }\n      str += `${attr.name}: ${JSON.stringify(attr.value)},`\n    }\n    return `{${str.slice(0, -1)}}`\n  }\n  function genChildren(el) {\n    let children = el.children\n    if (children && children.length > 0) {\n      return `${children.map((c) => gen(c)).join(',')}`\n    } else {\n      return false\n    }\n  }\n  function gen(node) {\n    if (node.type === 1) {\n      return generate(node)\n    } else {\n      let text = node.text\n      let token = []\n      let match, index\n      let lastIndex = 0\n      defaultTagRE.lastIndex = 0\n      while ((match = defaultTagRE.exec(text))) {\n        let index = match.index\n        if (index > lastIndex) {\n          token.push(JSON.stringify(text.slice(lastIndex, index)))\n        }\n        let value = match[1].trim()\n        token.push(`_s(${value})`)\n        lastIndex = match.index + match[0].length\n      }\n\n      return `_v(${token.join('+')})`\n    }\n  }\n  function generate(el) {\n    let children = genChildren(el)\n    let code = `_c(\"${el.tag}\", ${\n      el.attrs.length ? genProps(el.attrs) : 'undefined'\n    }${children ? `,${children}` : ''})`\n    return code\n  }\n  // 解析html字符串，将html字符串变成ast语法树\n  let root = parseHtml(template)\n  console.log('root', root)\n  // 将ast 语法树转成js语法\n  // _c(\"div\", {class: \"app testcss tttccc\",style: {\"color\":\"red\",\" font-size\":\"16px\"}},_c(\"p\", undefined,_v()),_c(\"span\", undefined,_v(\"hello\"+_s(message))))\n  let code = generate(root)\n  console.log(code)\n  // 所有模版引擎的实现 都需要new Function + with with可改变当前取值的作用域\n  let renderFn = new Function(`with(this){return ${code}}`)\n  // vue 的render 返回的事虚拟dom\n  console.log('renderFn', renderFn)\n  return renderFn\n}\n","import { initState } from './state.js'\nimport { compileToRender } from './compiler/index.js'\nexport function initMixin(Vue) {\n  Vue.prototype._init = function (options) {\n    const vm = this\n    vm.$options = options || {}\n    // 初始化状态\n    initState(vm)\n    if (vm.$options.el) {\n      vm.$mount(vm.$options.el)\n    }\n  }\n  Vue.prototype.$mount = function (el) {\n    const vm = this\n    const options = vm.$options\n    vm.$el = document.querySelector(el)\n    const render = options.render\n    if (!render) {\n      let template = vm.template\n      if (!template && vm.$el) {\n        template = vm.$el.outerHTML\n        const render = compileToRender(template)\n        options.render = render\n      }\n    } else {\n    }\n  }\n}\n","import { initMixin } from './init.js'\nfunction Vue(options) {\n  this._init(options)\n}\ninitMixin(Vue)\nexport default Vue\n"],"names":["isObject","obj","_typeof","def","data","key","value","Object","defineProperty","enumerable","configurable","proxy","target","sourceKey","get","set","newValue","oldArrayMethods","Array","prototype","arrayMethods","create","methods","forEach","method","console","log","_len","arguments","length","args","_key","result","apply","insert","ob","__ob__","slice","observerArray","Observer","_classCallCheck","isArray","__proto__","walk","_createClass","keys","defineReactive","item","observer","initState","vm","opts","$options","props","initData","computed","watch","_data","call","unicodeRegExp","attribute","ncname","concat","source","qnameCapture","startTagOpen","RegExp","startTagClose","endTag","root","currentParent","stack","ELEMENT_TYPE","TEXT_TYPE","createASTElement","tagName","attrs","type","tag","children","parent","start","element","push","chars","text","replace","end","pop","parseHtml","html","textEnd","indexOf","startTagMatch","parseStartTag","endTagMatch","match","advance","substring","n","attr","name","defaultTagRE","compileToRender","template","genProps","str","_loop","i","split","_item$split","_item$split2","_slicedToArray","trim","JSON","stringify","genChildren","el","map","c","gen","join","node","generate","token","lastIndex","exec","index","code","renderFn","Function","initMixin","Vue","_init","options","$mount","$el","document","querySelector","render","outerHTML"],"mappings":"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"}