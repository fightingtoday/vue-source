{"version":3,"file":"vue.js","sources":["../../src/utils/index.js","../../src/observer/index.js","../../src/state.js","../../src/init.js","../../src/index.js"],"sourcesContent":["export function isObject(obj) {\n  return typeof obj === 'object' && obj !== null\n}\n","// Object.defineProperty 不能兼容IE8以下\nimport { isObject } from '../utils/index'\n\nclass Observer {\n  constructor(value) {\n    this.walk(value)\n  }\n  walk(data) {\n    Object.keys(data).forEach((key) => {\n      defineReactive(data, key, data[key])\n    })\n  }\n}\nfunction defineReactive(data, key, value) {\n  observer(value) // 递归实现深度检测\n  Object.defineProperty(data, key, {\n    get() {\n      return value\n    },\n    set(newValue) {\n      observer(newValue) // 新值也是对象的时候需要再次监测\n      if (value !== newValue) {\n        value = newValue\n      }\n    },\n  })\n}\nexport function observer(data) {\n  if (!isObject(data)) {\n    return\n  }\n  return new Observer(data)\n}\n","import { observer } from './observer/index';\nexport function initState(vm) {\n  // vue 的props、methods、data、computed、watch、等的初始化\n  const opts = vm.$options\n  if (opts.props) {\n    initProps(vm)\n  }\n  if (opts.methods) {\n    initMethod(vm)\n  }\n  if (opts.data) {\n    initData(vm)\n  }\n  if (opts.computed) {\n    initComputed(vm)\n  }\n  if (opts.watch) {\n    initWatch(vm)\n  }\n}\nfunction initProps(vm) {}\nfunction initMethod(vm) {}\nfunction initData(vm) {\n  console.log('初始化数据', vm)\n  let data = vm.$options.data\n  data = vm._data = typeof data === 'function' ? data.call(vm) : data\n  // 对象劫持\n  console.log(data)\n  // Object.defineProperty,给书香增加get、set 方法\n  observer(data) // 响应式原理\n}\nfunction initComputed(vm) {}\nfunction initWatch(vm) {}\n","import { initState } from './state.js'\nexport function initMixin(Vue) {\n  Vue.prototype._init = function (options) {\n    const vm = this\n    vm.$options = options || {}\n    // 初始化状态\n    initState(vm)\n  }\n}\n","import { initMixin } from './init.js'\nfunction Vue(options) {\n  this._init(options)\n}\ninitMixin(Vue)\nexport default Vue\n"],"names":["isObject","obj","_typeof","Observer","value","_classCallCheck","walk","_createClass","key","data","Object","keys","forEach","defineReactive","observer","defineProperty","get","set","newValue","initState","vm","opts","$options","props","methods","initData","computed","watch","console","log","_data","call","initMixin","Vue","prototype","_init","options"],"mappings":"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"}