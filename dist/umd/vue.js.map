{"version":3,"file":"vue.js","sources":["../../src/utils/index.js","../../src/observer/array.js","../../src/observer/dep.js","../../src/observer/index.js","../../src/state.js","../../src/compiler/parse-html.js","../../src/compiler/generate.js","../../src/compiler/index.js","../../src/utils/next-tick.js","../../src/observer/schedular.js","../../src/observer/watcher.js","../../src/vdom/patch.js","../../src/lifecycle.js","../../src/init.js","../../src/vdom/create-element.js","../../src/render.js","../../src/globalApi/mixin.js","../../src/globalApi/const.js","../../src/globalApi/assets.js","../../src/globalApi/extend.js","../../src/globalApi/index.js","../../src/index.js"],"sourcesContent":["export function isObject(obj) {\n  return typeof obj === 'object' && obj !== null\n}\n\nexport function def(data, key, value) {\n  Object.defineProperty(data, key, {\n    enumerable: false, // 不可遍历\n    configurable: false,\n    value: value,\n  })\n}\n// 取值时实现代理效果\nexport function proxy(target, sourceKey, key) {\n  Object.defineProperty(target, key, {\n    get() {\n      return target[sourceKey][key]\n    },\n    set(newValue) {\n      target[sourceKey][key] = newValue\n    },\n  })\n}\nconst LIFECYCLE_HOOKS = [\n  'beforeCreate',\n  'created',\n  'beforeMount',\n  'mounted',\n  'beforeUpdate',\n  'updated',\n  'beforeDestroy',\n  'destroyed',\n]\nlet strats = {}\nfunction mergeHook(parent, child) {\n  if (child) {\n    if (parent) {\n      return parent.concat(child)\n    } else {\n      return [child]\n    }\n  } else {\n    return parent\n  }\n}\nLIFECYCLE_HOOKS.forEach((hook) => {\n  strats[hook] = mergeHook\n})\nfunction mergeAssets(parentVal, childVal) {\n  let res = Object.create(parentVal) // res.__proto__ = parentVal  把全局组件放到原型链上，自己的components上找不到去原型链上找\n  if (childVal) {\n    for (let key in childVal) {\n      res[key] = childVal[key]\n    }\n  }\n  return res\n}\nstrats.components = mergeAssets\n\nexport function mergeOptions(parent, child) {\n  const options = {}\n  for (let key in parent) {\n    mergeField(key)\n  }\n  for (let key in child) {\n    if (!parent.hasOwnProperty(key)) {\n      mergeField(key)\n    }\n  }\n  // 默认的合并策略，但是有些属性有特殊的合并方式（生命周期等）\n  function mergeField(key) {\n    if (strats[key]) {\n      options[key] = strats[key](parent[key], child[key])\n      return\n    }\n    if (typeof parent[key] === 'object' && typeof child[key] === 'object') {\n      options[key] = {\n        ...parent[key],\n        ...child[key],\n      }\n    } else if (!child[key]) {\n      options[key] = parent[key]\n    } else {\n      options[key] = child[key]\n    }\n  }\n  return options\n}\n\nexport function isReservedTag(tagName) {\n  let str = 'div,p,span,i,section,img,a,input,button,ul,li'\n  let arr = str.split(',')\n  let obj = {}\n  arr.forEach((name) => {\n    obj[name] = true\n  })\n  return obj[tagName] || false\n}\n","// 重写数组的方法 push、pop、shift、unshift、sort、splice、reverse(这些方法回改变原数组所以需要重写)，slice这个方法不会改变原数组所以不需要重写\nlet oldArrayMethods = Array.prototype\nexport const arrayMethods = Object.create(oldArrayMethods)\n\nconst methods = ['push', 'pop', 'shift', 'unshift', 'sort', 'splice', 'reverse']\nmethods.forEach(function (method) {\n  arrayMethods[method] = function (...args) {\n    // console.log('用户操作了', method)\n    const result = oldArrayMethods[method].apply(this, args) // 这里得把args传过去才行\n    // push unshift方法插入的值可能是对象需要观测\n    let insert\n    let ob = this.__ob__\n    switch (method) {\n      case 'push':\n      case 'unshift':\n        insert = args\n        break\n      case 'splice':\n        insert = args.slice(2)\n      default:\n        break\n    }\n    if (insert) {\n      ob.observerArray(insert)\n    }\n    ob.dep.notify()\n    return result\n  }\n})\n","let id = 0\nclass Dep {\n  constructor() {\n    this.id = id++\n    this.subs = []\n  }\n  addSubs(watcher) {\n    this.subs.push(watcher)\n  }\n  depend() {\n    if (Dep.target) {\n      Dep.target.addDep(this)\n    }\n  }\n  notify() {\n    this.subs.forEach((sub) => {\n      sub.update()\n    })\n  }\n}\nlet stack = []\nexport function pushTarget(watcher) {\n  Dep.target = watcher\n  stack.push(watcher)\n}\nexport function popTarget() {\n  stack.pop()\n  Dep.target = stack.length && stack[stack.length - 1]\n}\n\nexport default Dep\n","// Object.defineProperty 不能兼容IE8以下\nimport { isObject, def } from '../utils/index'\nimport { arrayMethods } from './array.js'\nimport Dep from './dep.js'\n\nclass Observer {\n  constructor(value) {\n    value.__ob__ = this\n    this.dep = new Dep()\n    def(value, '__ob__', this)\n    if (Array.isArray(value)) {\n      // 数组不会对索引进行监控，性能差，前端开发中通过索引去操作也很少，一般用的push、 pop等方法\n      // 重写数组方法\n      value.__proto__ = arrayMethods\n      // 对数组的对象去监控\n      this.observerArray(value)\n    } else {\n      this.walk(value)\n    }\n  }\n  walk(data) {\n    Object.keys(data).forEach((key) => {\n      defineReactive(data, key, data[key])\n    })\n  }\n  observerArray(data) {\n    data.forEach((item) => {\n      observer(item)\n    })\n  }\n}\nfunction defineReactive(data, key, value) {\n  let dep = new Dep()\n  // 这里的value有可能是对象，也可能是数组， 返回的结果是observer的实例\n  let childOb = observer(value) // 递归实现深度检测\n  Object.defineProperty(data, key, {\n    get() {\n      if (Dep.target) {\n        dep.depend() // 收集依赖\n        if (childOb) {\n          // 数组的依赖手机\n          childOb.dep.depend() // 收集依赖\n\n          // 数组中还有数组\n          if (Array.isArray(value)) {\n            dependArray(value)\n          }\n        }\n      }\n      return value\n    },\n    set(newValue) {\n      observer(newValue) // 新值也是对象的时候需要再次监测\n      if (value !== newValue) {\n        value = newValue\n      }\n      dep.notify() // 通知所有依赖更新\n    },\n  })\n}\nfunction dependArray(value) {\n  for (let i = 0; i < value.length; i++) {\n    let current = value[i] //数组中的数组依赖收集\n    current._ob_ && current._ob_.dep.depend()\n    if (Array.isArray(current)) {\n      dependArray(current)\n    }\n  }\n}\nexport function observer(data) {\n  if (!isObject(data)) {\n    return\n  }\n  return new Observer(data)\n}\n","import { observer } from './observer/index'\nimport { proxy } from './utils/index'\nexport function initState(vm) {\n  // vue 的props、methods、data、computed、watch、等的初始化\n  const opts = vm.$options\n  if (opts.props) {\n    initProps(vm)\n  }\n  if (opts.methods) {\n    initMethod(vm)\n  }\n  if (opts.data) {\n    initData(vm)\n  }\n  if (opts.computed) {\n    initComputed(vm)\n  }\n  if (opts.watch) {\n    initWatch(vm)\n  }\n}\n\nfunction initProps(vm) {}\nfunction initMethod(vm) {}\nfunction initData(vm) {\n  // console.log('初始化数据', vm)\n  let data = vm.$options.data\n  data = vm._data = typeof data === 'function' ? data.call(vm) : data\n  // 代理 将vm.xxx 代理到vm._data.xxx(方便用户取值)\n  for (let key in data) {\n    proxy(vm, '_data', key)\n  }\n  // 对象劫持\n  // Object.defineProperty,给书香增加get、set 方法\n  observer(data) // 响应式原理\n}\nfunction initComputed(vm) {}\nfunction initWatch(vm) {}\n","export const unicodeRegExp =\n  /a-zA-Z\\u00B7\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u203F-\\u2040\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD/\n\n// Regular Expressions for parsing tags and attributes\nconst attribute =\n  /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/\nconst dynamicArgAttribute =\n  /^\\s*((?:v-[\\w-]+:|@|:|#)\\[[^=]+?\\][^\\s\"'<>\\/=]*)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z${unicodeRegExp.source}]*`\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`\nconst startTagOpen = new RegExp(`^<${qnameCapture}`) // 标签开头的正则，捕获的内容是标签名\nconst startTagClose = /^\\s*(\\/?)>/ // 捕获的内容是结尾标签\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`)\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g // 匹配{{}}\nconst regexEscapeRE = /[-.*+?^${}()|[\\]\\/\\\\]/g\nconst doctype = /^<!DOCTYPE [^>]+>/i\n// #7298: escape - to avoid being passed as HTML comment when inlined in page\nconst comment = /^<!\\--/\nconst conditionalComment = /^<!\\[/\n\nexport function parseHtml(html) {\n  let root = null //ast语法树树根\n  let currentParent = null // 当前父节点\n  let stack = [] // 栈存放dom 标签结构，判断标签是否正确闭合\n  const ELEMENT_TYPE = 1\n  const TEXT_TYPE = 3\n\n  function createASTElement(tagName, attrs) {\n    return {\n      type: ELEMENT_TYPE,\n      tag: tagName,\n      attrs: attrs,\n      children: [],\n      parent: null,\n    }\n  }\n  function start(tagName, attrs) {\n    //   console.log('开始标签：', tagName, '属性是：', attrs)\n    let element = createASTElement(tagName, attrs)\n    if (!root) {\n      root = element\n    }\n    currentParent = element\n    stack.push(element) // 标签入栈\n  }\n  function chars(text) {\n    //   console.log('文本是：', text)\n    text = text.replace(/\\s/g, '')\n    if (text) {\n      currentParent.children.push({\n        text,\n        type: TEXT_TYPE,\n      })\n    }\n  }\n  function end(tagName) {\n    //   console.log('结束标签：', tagName)\n    let element = stack.pop()\n    currentParent = stack.length > 0 ? stack[stack.length - 1] : null\n    if (currentParent) {\n      element.parent = currentParent\n      currentParent.children.push(element) //实现了树的父子关系\n    }\n  }\n  while (html) {\n    let textEnd = html.indexOf('<')\n    if (textEnd === 0) {\n      let startTagMatch = parseStartTag()\n      if (startTagMatch) {\n        start(startTagMatch.tagName, startTagMatch.attrs)\n        continue\n      }\n\n      let endTagMatch = html.match(endTag)\n      //   console.log('endTagMatch', endTagMatch)\n      if (endTagMatch) {\n        advance(endTagMatch[0].length)\n        end(endTagMatch[1])\n        continue\n      }\n    }\n    let text\n    if (textEnd > 0) {\n      text = html.substring(0, textEnd)\n    }\n    if (text) {\n      advance(text.length)\n      chars(text)\n    }\n  }\n  function advance(n) {\n    html = html.substring(n)\n  }\n  function parseStartTag() {\n    let start = html.match(startTagOpen)\n    if (start) {\n      const match = {\n        tagName: start[1],\n        attrs: [],\n      }\n      advance(start[0].length)\n      let end, attr\n      while (\n        !(end = html.match(startTagClose)) &&\n        (attr = html.match(attribute))\n      ) {\n        advance(attr[0].length) // 去掉属性\n        match.attrs.push({\n          name: attr[1],\n          value: attr[3] || attr[4] || attr[5],\n        })\n      }\n      if (end) {\n        // 去掉开始标签的 >\n        advance(end[0].length)\n        return match\n      }\n    }\n  }\n  return root\n}\n","const defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g // 匹配{{}}\nfunction genProps(attrs) {\n  // 处理属性 拼接成属性字符串\n  let str = ''\n  for (let i = 0; i < attrs.length; i++) {\n    let attr = attrs[i]\n    if (attr.name === 'style') {\n      let obj = {}\n      attr.value.split(';').forEach((item) => {\n        let [key, value] = item.split(':')\n        obj[key] = value.trim()\n      })\n      attr.value = obj\n    }\n    str += `${attr.name}: ${JSON.stringify(attr.value)},`\n  }\n  return `{${str.slice(0, -1)}}`\n}\nfunction genChildren(el) {\n  let children = el.children\n  if (children && children.length > 0) {\n    return `${children.map((c) => gen(c)).join(',')}`\n  } else {\n    return false\n  }\n}\nfunction gen(node) {\n  if (node.type === 1) {\n    return generate(node)\n  } else {\n    let text = node.text\n    let token = []\n    let match, index\n    let lastIndex = 0\n    defaultTagRE.lastIndex = 0\n    while ((match = defaultTagRE.exec(text))) {\n      let index = match.index\n      if (index > lastIndex) {\n        token.push(JSON.stringify(text.slice(lastIndex, index)))\n      }\n      let value = match[1].trim()\n      token.push(`_s(${value})`)\n      lastIndex = match.index + match[0].length\n    }\n    if (lastIndex < text.length) {\n      token.push(JSON.stringify(text.slice(lastIndex)))\n    }\n    return `_v(${token.join('+')})`\n  }\n}\nexport function generate(el) {\n  let children = genChildren(el)\n  let code = `_c(\"${el.tag}\", ${\n    el.attrs.length ? genProps(el.attrs) : 'undefined'\n  }${children ? `,${children}` : ''})`\n  return code\n}\n","import { parseHtml } from './parse-html'\nimport { generate } from './generate'\n\nexport function compileToRender(template) {\n  // 解析html字符串，将html字符串变成ast语法树\n  let root = parseHtml(template)\n  // console.log('root', root)\n  // 将ast 语法树转成js语法\n  // _c(\"div\", {class: \"app testcss tttccc\",style: {\"color\":\"red\",\" font-size\":\"16px\"}},_c(\"p\", undefined,_v()),_c(\"span\", undefined,_v(\"hello\"+_s(message))))\n  let code = generate(root)\n  // console.log(code)\n  // 所有模版引擎的实现 都需要new Function + with with可改变当前取值的作用域\n  let renderFn = new Function(`with(this){return ${code}}`)\n  // vue 的render 返回的事虚拟dom\n  // console.log('renderFn', renderFn)\n  return renderFn\n}\n","let callbacks = []\nlet loading = false\nfunction flushCallback() {\n  for (let i = 0; i < callbacks.length; i++) {\n    callbacks[i]()\n  }\n  loading = false\n  callbacks = []\n}\nexport function nextTick(cb) {\n  callbacks.push(cb)\n  if (!loading) {\n    loading = true\n    setTimeout(flushCallback, 0)\n  }\n}\n","let queue = []\nlet has = {}\nimport { nextTick } from '../utils/next-tick'\nfunction flush() {\n  queue.forEach((watcher) => {\n    watcher.run()\n  })\n  queue = []\n  has = {}\n}\nexport function queueWatcher(watcher) {\n  let id = watcher.id\n  if (has[id] === null) {\n    queue.push(watcher)\n    has[id] = true\n  }\n  nextTick(flush)\n}\n","import { pushTarget, popTarget } from './dep.js'\nimport { queueWatcher } from './schedular.js'\nlet id = 0\nclass Watcher {\n  constructor(vm, expOrFn, cb, options) {\n    this.vm = vm\n    this.id = id++\n    this.getter = expOrFn\n    this.depsId = new Set()\n    this.deps = []\n    this.cb = cb\n    this.options = options\n    this.get()\n  }\n  get() {\n    pushTarget(this)\n    this.getter()\n    popTarget()\n  }\n  update() {\n    // 等待着一起更新\n    // this.getter()\n    queueWatcher(this)\n  }\n  run() {\n    this.getter()\n  }\n  addDep(dep) {\n    let id = dep.id\n    if (!this.depsId.has(id)) {\n      this.depsId.add(id)\n      this.deps.push(dep)\n      dep.addSubs(this)\n    }\n  }\n}\n\nexport default Watcher\n","export function patch(oldVnode, vnode) {\n  if (!oldVnode) {\n    // 这里是组件的挂载\n    let el = createElm(vnode)\n    return el\n  } else {\n    // 1、判断是更新还是渲染\n    const isRealElement = oldVnode.nodeType\n    if (isRealElement) {\n      const oldElm = oldVnode // div app\n      const parentElm = oldVnode.parentNode // body\n      let el = createElm(vnode)\n      parentElm.insertBefore(el, oldElm.nextSibling) // ��入到dom中\n      parentElm.removeChild(oldElm)\n      return el\n    } else {\n      // dom diff 平级比对，应为正常业务很少父变子，子变父亲\n      if (oldVnode.tag !== vnode.tag) {\n        // 1、标签不一致直接替换\n        oldVnode.el.parentNode.replaceChild(createElm(vnode), oldVnode.el)\n      }\n      // 2、如果文本呢？文本都没有tag\n      if (!oldVnode.tag) {\n        if (oldVnode.text !== vnode.text) {\n          oldVnode.el.textContent = vnode.text\n        }\n      }\n      // 3、标签一致而且不是文本（比对属性是否一致）\n      let el = (vnode.el = oldVnode.el)\n      updateProperties(vnode, oldVnode.data)\n    }\n  }\n}\nfunction createComponent(vnode) {\n  // 判断是不是组件\n  let i = vnode.data\n  if ((i = i.hooks) && (i = i.init)) {\n    i(vnode)\n  }\n  if (vnode.componentInstance) {\n    return true\n  }\n}\n// 根据虚拟节点创建真实节点\nexport function createElm(vnode) {\n  const { tag, data, children, key, text } = vnode\n  if (typeof tag === 'string') {\n    // 有可能是组件\n    if (createComponent(vnode)) {\n      return vnode.componentInstance.$el\n    }\n    vnode.el = document.createElement(tag)\n    updateProperties(vnode)\n    children.forEach((child) => {\n      vnode.el.appendChild(createElm(child))\n    })\n  } else {\n    vnode.el = document.createTextNode(text)\n  }\n  return vnode.el\n}\nfunction updateProperties(vnode, oldProps = {}) {\n  let data = vnode.data || {}\n  let el = vnode.el\n  // 如果老的属性中有新的属性中没有则删掉\n  for (let key in oldProps) {\n    if (!data[key]) {\n      el.removeAttribute(key)\n    }\n  }\n  // style 比对\n  let newStyle = data.style || {}\n  let oldStyle = oldProps.style || {}\n  for (let key in oldStyle) {\n    if (!newStyle[key]) {\n      el.style[key] = ''\n    }\n  }\n  for (let key in data) {\n    if (key === 'style') {\n      for (let styleName in data.style) {\n        el.style[styleName] = data.style[styleName]\n      }\n    } else if (key === 'class') {\n      el.className = data.class\n    } else {\n      el.setAttribute(key, data[key])\n    }\n  }\n}\n","import Watcher from './observer/watcher'\nimport { patch } from './vdom/patch.js'\nexport function lifecycleMixin(Vue) {\n  // 通过虚拟dom创建真实dom\n  Vue.prototype._update = function (vnode) {\n    // 通过虚拟节点创建真实dom\n    const vm = this\n    vm.$el = patch(vm.$el, vnode)\n    // console.log('vnode', vnode)\n  }\n}\nexport function mountComponent(vm, el) {\n  const options = vm.$options\n  callHook(vm, 'beforeMount')\n  // 渲染页面\n  // 无论渲染还是更新都会调用此方法\n  let updateComponent = () => {\n    // console.log('update')\n    vm._update(vm._render())\n  }\n  // 渲染watcher 每个组件都有一个watcher\n  new Watcher(vm, updateComponent, () => {}, true) // true表示他是一个渲染watcher\n  callHook(vm, 'mounted')\n}\n\nexport function callHook(vm, hook) {\n  const handlers = vm.$options[hook]\n  if (handlers) {\n    // 找到对应的钩子依次执行\n    for (let i = 0, j = handlers.length; i < j; i++) {\n      handlers[i].call(vm)\n    }\n  }\n}\n","import { initState } from './state.js'\nimport { compileToRender } from './compiler/index.js'\nimport { mountComponent, callHook } from './lifecycle.js'\nimport { mergeOptions } from './utils/index'\nimport { nextTick } from './utils/next-tick'\n\nexport function initMixin(Vue) {\n  Vue.prototype._init = function (options) {\n    const vm = this\n    vm.$options = mergeOptions(vm.constructor.options, options) || {}\n    callHook(vm, 'beforeCreate')\n    // 初始化状态\n    initState(vm)\n    callHook(vm, 'created')\n    if (vm.$options.el) {\n      vm.$mount(vm.$options.el)\n    }\n  }\n  Vue.prototype.$mount = function (el) {\n    const vm = this\n    const options = vm.$options\n    vm.$el = document.querySelector(el)\n    const render = options.render\n    if (!render) {\n      let template = options.template\n      if (!template && vm.$el) {\n        template = vm.$el.outerHTML\n      }\n      const render = compileToRender(template)\n      options.render = render\n    }\n    mountComponent(vm)\n  }\n  Vue.prototype.$nextTick = nextTick\n}\n","import { isObject, isReservedTag } from '../utils/index'\nexport function createElement(vm, tag, data = {}, ...children) {\n  let key = data && data.key\n  if (key) {\n    delete data.key\n  }\n  if (isReservedTag(tag)) {\n    // 原始标签的处理 div span ...\n    return vnode(tag, data, key, children, undefined)\n  } else {\n    // 组件的处理\n    let Ctor = vm.$options.components[tag]\n    return createComponent(vm, tag, data, key, children, Ctor)\n  }\n}\nfunction createComponent(vm, tag, data, key, children, Ctor) {\n  if (isObject(Ctor)) {\n    Ctor = vm.$options._base.extend(Ctor)\n  }\n  data.hooks = {\n    init(vnode) {\n      // 当前组件的实例就是componentInstance\n      let child = new Ctor({ _isComponent: true })\n      vnode.componentInstance = child\n      // 组件的挂载\n      child.$mount()\n    },\n  }\n\n  return vnode(\n    `vue-component${Ctor.cid}-${tag}`,\n    data,\n    key,\n    undefined,\n    undefined,\n    {\n      Ctor,\n      children,\n    }\n  )\n}\nexport function createTextVNode(text) {\n  return vnode(undefined, undefined, undefined, undefined, text)\n}\n\nfunction vnode(tag, data, key, children, text, componentOptions) {\n  return {\n    tag,\n    data,\n    key,\n    children,\n    text,\n    componentOptions,\n  }\n}\n","import { createElement, createTextVNode } from './vdom/create-element.js'\nexport function renderMixin(Vue) {\n  Vue.prototype._c = function () {\n    return createElement(this, ...arguments)\n  }\n  Vue.prototype._v = function (text) {\n    return createTextVNode(text)\n  }\n  Vue.prototype._s = function (val) {\n    return val === null\n      ? ''\n      : typeof val === 'object'\n      ? JSON.stringify(val)\n      : val\n  }\n  Vue.prototype._render = function () {\n    // _c创建元素虚拟节点\n    // _v 创建文本虚拟节点\n    // _s 转义文本JSON.stringify\n\n    const vm = this\n    const render = vm.$options.render\n    return render.call(this)\n  }\n}\n","import { mergeOptions } from '../utils/index'\nexport function initMixin(Vue) {\n  Vue.mixin = function (mixin) {\n    this.options = mergeOptions(this.options, mixin)\n  }\n}\n","export const ASSETS_TYPE = ['component', 'directive', 'filter']\n","import { ASSETS_TYPE } from './const.js'\nexport function initAssetRegisters(Vue) {\n  ASSETS_TYPE.forEach((type) => {\n    Vue[type] = function (id, definition) {\n      if (type === 'component') {\n        // 注册全局组件\n        // 使用extend 方法将对象变成构造函数\n        definition.name = definition.name || id\n        definition = this.options._base.extend(definition)\n      }\n      this.options[type + 's'][id] = definition\n    }\n  })\n}\n","import { mergeOptions } from '../utils/index'\n\nexport function initExtend(Vue) {\n  // 创建出一个子类拥有父类的方法\n  let cid = 0\n  Vue.extend = function (extendOptions) {\n    const Super = this\n    const Sub = function VueComponent(options) {\n      this._init(options)\n    }\n    Sub.cid = cid++\n    Sub.prototype = Object.create(Super.prototype)\n    Sub.prototype.constructor = Sub\n    Sub.options = mergeOptions(Super.options, extendOptions)\n    return Sub\n  }\n}\n","import { initMixin } from './mixin.js'\nimport { initAssetRegisters } from './assets.js'\nimport { ASSETS_TYPE } from './const.js'\nimport { initExtend } from './extend.js'\n\nexport function initGlobalAPI(Vue) {\n  Vue.options = {}\n  ASSETS_TYPE.forEach(function (type) {\n    Vue.options[type + 's'] = {}\n  })\n  Vue.options._base = Vue // _base是vue的构造函数\n  initMixin(Vue)\n  initExtend(Vue)\n  initAssetRegisters(Vue)\n}\n","import { initMixin } from './init.js'\nimport { renderMixin } from './render.js'\nimport { lifecycleMixin } from './lifecycle.js'\nimport { initGlobalAPI } from './globalApi/index.js'\nimport { compileToRender } from './compiler/index.js'\nimport { patch, createElm } from './vdom/patch.js'\n\nfunction Vue(options) {\n  this._init(options)\n}\ninitMixin(Vue)\nrenderMixin(Vue)\nlifecycleMixin(Vue)\ninitGlobalAPI(Vue)\n\n// demo 产生两个虚拟节点进行比对\nconst vm1 = new Vue({\n  data: { name: 'test' },\n})\nlet render1 = compileToRender(\n  `<div class=\"vm1\" id=\"app\" style=\"background:red\">Hello World!{{name}}</div>`\n)\nlet vnode = render1.call(vm1)\nlet el = createElm(vnode)\ndocument.body.appendChild(el)\n\nconst vm2 = new Vue({\n  data: { test: 'zzzzzz' },\n})\nlet render2 = compileToRender(\n  `<div class=\"vm2 pClass\" style=\"color:blue\">Hello World1!{{test}}</div>`\n)\nlet newvnode = render2.call(vm2)\nsetTimeout(() => {\n  patch(vnode, newvnode)\n}, 1000)\nexport default Vue\n"],"names":["isObject","obj","_typeof","def","data","key","value","Object","defineProperty","enumerable","configurable","proxy","target","sourceKey","get","set","newValue","LIFECYCLE_HOOKS","strats","mergeHook","parent","child","concat","forEach","hook","mergeAssets","parentVal","childVal","res","create","components","mergeOptions","options","mergeField","hasOwnProperty","_objectSpread","isReservedTag","tagName","str","arr","split","name","oldArrayMethods","Array","prototype","arrayMethods","methods","method","_len","arguments","length","args","_key","result","apply","insert","ob","__ob__","slice","observerArray","dep","notify","id","Dep","_classCallCheck","subs","_createClass","addSubs","watcher","push","depend","addDep","sub","update","stack","pushTarget","popTarget","pop","Observer","isArray","__proto__","walk","keys","defineReactive","item","observer","childOb","dependArray","i","current","_ob_","initState","vm","opts","$options","props","initData","computed","watch","_data","call","unicodeRegExp","attribute","ncname","source","qnameCapture","startTagOpen","RegExp","startTagClose","endTag","parseHtml","html","root","currentParent","ELEMENT_TYPE","TEXT_TYPE","createASTElement","attrs","type","tag","children","start","element","chars","text","replace","end","textEnd","indexOf","startTagMatch","parseStartTag","endTagMatch","match","advance","substring","n","attr","defaultTagRE","genProps","_loop","_item$split","_item$split2","_slicedToArray","trim","JSON","stringify","genChildren","el","map","c","gen","join","node","generate","token","lastIndex","exec","index","code","compileToRender","template","renderFn","Function","callbacks","loading","flushCallback","nextTick","cb","setTimeout","queue","has","flush","run","queueWatcher","Watcher","expOrFn","getter","depsId","Set","deps","add","patch","oldVnode","vnode","createElm","isRealElement","nodeType","oldElm","parentElm","parentNode","insertBefore","nextSibling","removeChild","replaceChild","textContent","updateProperties","createComponent","hooks","init","componentInstance","$el","document","createElement","appendChild","createTextNode","oldProps","undefined","removeAttribute","newStyle","style","oldStyle","styleName","className","setAttribute","lifecycleMixin","Vue","_update","mountComponent","callHook","updateComponent","_render","handlers","j","initMixin","_init","constructor","$mount","querySelector","render","outerHTML","$nextTick","Ctor","_base","extend","_isComponent","cid","createTextVNode","componentOptions","renderMixin","_c","_v","_s","val","mixin","ASSETS_TYPE","initAssetRegisters","definition","initExtend","extendOptions","Super","Sub","VueComponent","initGlobalAPI","vm1","render1","body","vm2","test","render2","newvnode"],"mappings":"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"}